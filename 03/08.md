### âœï¸ Tangxt â³ 2021-03-07 ğŸ·ï¸ è™šæ‹Ÿ DOM

# 08-DOM åŸºç¡€ã€åˆçº§ DOM ç¼–è¯‘-1

> ä»»ä½•ä¸€ä¸ªä¸œè¥¿è¢«å®Œå…¨æ·˜æ±°éƒ½ä¼šæœ‰ä¸€ä¸ªè¿‡ç¨‹ï¼Œæ¯•ç«Ÿï¼Œå½“åˆå®ƒä¸€ç»Ÿæ±Ÿæ¹–çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯å‡»è´¥äº†è®¸å¤šå¯¹æ‰‹ï¼ -> ä¾‹å­ï¼š `defineProperty` -> è¿˜æœ‰æ¡†æ¶åœ¨ç”¨å®ƒï¼ -> ä½†ç›®å‰æ˜¯æ¨èä½¿ç”¨ `Proxy` çš„ï¼

ä¸ŠèŠ‚è¯¾çš„çŸ¥è¯†å”¯æœ‰åœ¨å®è·µä¸­æ‰èƒ½æ˜ç™½å®ƒä»¬çš„ä½œç”¨ï¼

### <mark>1ï¼‰DOM æ“ä½œ</mark>

> DOM æ¶‰åŠåˆ°å¾ˆå¤šå¤–å»¶çš„ä¸œè¥¿

![å¤–å»¶ä¸å†…æ¶µ](assets/img/2021-03-07-17-58-26.png)

> [é€»è¾‘å­¦ä¸­ã€Œå¤–å»¶ã€ä¸ã€Œå†…æ¶µã€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ - æ—å¤§ç‚®çš„å›ç­” - çŸ¥ä¹](https://www.zhihu.com/question/22267682/answer/1644637486)

vDOMï¼ˆè™šæ‹Ÿ DOMï¼Œå…¨ä¸–ç•Œçš„äººéƒ½è¿™ä¹ˆå«ï¼‰æ€»ä¼šå…³è”åˆ°çœŸå® DOMï¼Œä¸ç„¶ vDOM ä¸€ç‚¹æ„ä¹‰éƒ½æ²¡æœ‰ï¼Œæ¯•ç«Ÿæˆ‘ä»¬è¦åœ¨é¡µé¢é‡Œè¾¹çœ‹åˆ°ä¸œè¥¿å•Šï¼

* DOMï¼ˆç”±å„ç§èŠ‚ç‚¹æ„æˆï¼‰
  + DOM èŠ‚ç‚¹ -> åˆ¤æ–­èŠ‚ç‚¹ã€èŠ‚ç‚¹ç›¸å…³ä¿¡æ¯ã€å¦‚ä½•æ‰¾èŠ‚ç‚¹
  + DOM æ“ä½œ -> å¦‚ä½•åˆ›å»ºï¼Ÿæ·»åŠ ï¼Ÿåˆ é™¤ï¼Ÿ
  + æ–‡æ¡£ç¢ç‰‡ -> IE6 é‚£ä¸ªå¹´ä»£å°±æœ‰çš„ä¸œè¥¿ï¼Œä½†ä¸€ç›´å°±å’©æœ‰è¢«å¤§å®¶æ‰€é‡è§†èµ·æ¥ï¼Œå› ä¸ºæˆ‘ä»¬æ‰¾ä¸åˆ°åº”ç”¨åœºæ™¯å‘€ï¼
    - å®ƒæœ‰å¾ˆå¤šä¼˜åŠ¿ï¼Œå¦‚æ€§èƒ½ã€æ“ä½œä¾¿åˆ©ä¸Šç­‰
    - åç»­ç»å¸¸ä¼šç”¨åˆ°
  + DOM å±æ€§ -> æ·»åŠ å±æ€§ï¼ˆä¸ä¸€å®šæ˜¯`.xxx`è¿™æ ·åŠ å±æ€§ï¼‰ã€éå†å±æ€§
  + ç¼–è¯‘ DOM èŠ‚ç‚¹ -> ç»™ vDOM é“ºè·¯
    - ç›´æ¥ç”¨ DOM æ€§èƒ½ä¸å¥½ï¼Œéœ€è¦è½¬åŒ–æˆå¦ä¸€ç§å½¢å¼ -> æŠŠæ ‡ç­¾æŠ½ç¦»å‡ºæ¥ï¼

ğŸ’¡ï¼šè®¾è®¡æ¨¡å¼æ˜¯å•¥ï¼Ÿ

* ç›®çš„ï¼šè§£å†³é—®é¢˜
* ä½ é‡åˆ°çš„é—®é¢˜ï¼šç»™äº†ä½ ç›®å‰**æœ€ä¼˜çš„**è§£å†³æ–¹æ¡ˆ

#### <mark>1ã€èŠ‚ç‚¹</mark>

èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³» -> çˆ¶å­ã€å…„å¼Ÿ

1. çˆ¶èŠ‚ç‚¹ -> parentNode
2. å­èŠ‚ç‚¹ -> è·å–å…ƒç´ æ‰€è¿”å›çš„éƒ½ä¸æ˜¯æ•°ç»„

   1. children -> **å…ƒç´ èŠ‚ç‚¹**
   2. childNodes -> ä¸å¸¸ç”¨ï¼Œä½†æŸäº›åœºæ™¯ä¸‹ï¼Œä¸å¾—ä¸ç”¨å®ƒï¼ -> **å„ç§èŠ‚ç‚¹**ï¼Œå¦‚æ–‡æœ¬èŠ‚ç‚¹ã€æ³¨é‡ŠèŠ‚ç‚¹ã€å…ƒç´ èŠ‚ç‚¹ç­‰

      1. ç©ºæ ¼ä¹Ÿè®¸å¯¹æˆ‘ä»¬æ²¡æœ‰æ„ä¹‰ï¼Œä½†å¯¹äºè®¡ç®—æœºè€Œè¨€ï¼Œå®ƒæ˜¯æœ‰æ„ä¹‰çš„ï¼å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå­—ç¬¦å‘€ï¼
      2. æˆ‘ä»¬åŸºæœ¬ä¸æ“ä½œæ–‡æœ¬èŠ‚ç‚¹ï¼Œæ¯•ç«Ÿå®ƒåŠ ä¸äº†äº‹ä»¶å‘€ï¼æˆ‘ä»¬éƒ½æ˜¯åœ¨å…ƒç´ èŠ‚ç‚¹ä¸ŠåŠ çš„ï¼

ğŸ’¡ï¼šèŠ‚ç‚¹ç±»å‹ï¼Ÿ

æ ¹æ®ç±»å‹ï¼Œææ“ä½œï¼

![èŠ‚ç‚¹ç±»å‹](assets/img/2021-03-07-18-33-47.png)

â¹ï¼š[Node.nodeType - Web APIs - MDN](https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType)

---

å±æ€§èŠ‚ç‚¹åŸºæœ¬ä¸ä¼šç”¨åˆ°ï¼Œæ—¢ç„¶ä¸ä¼šç”¨å®ƒï¼Œå¯ä¸ºå•¥ä¼šæœ‰å®ƒå‘¢ï¼Ÿå› ä¸º HTML æ˜¯ XML çš„å­çº§å‘€ï¼è¿™ä¸ªå±æ€§èŠ‚ç‚¹æ˜¯ç»§æ‰¿è‡ª XML çš„ï¼Œè€Œ XML æ˜¯æœ‰å±æ€§èŠ‚ç‚¹çš„ï¼ -> XML æ˜¯é€è¿‡ `getAttributeNode()` æ–¹æ³•æ‹¿åˆ°å±æ€§èŠ‚ç‚¹

`Node.CDATA_SECTION_NODE` -> å‡ ä¹ä¸ç”¨ï¼Œæ—©æœŸ HTML ä¼šç”¨åˆ°ï¼

ğŸ’¡ï¼šdocumentï¼Ÿ

ä¸€ä¸ªå¾ˆç‰¹æ®Šçš„è™šæ‹ŸèŠ‚ç‚¹ï¼

å¯ä»¥ç†è§£æˆçœ‹ä¸è§çš„é¡¶çº§å…ƒç´ ï¼š

``` html
<document>
  <html>

  </html>
</document>
```

æ€»ä¹‹ï¼Œå®ƒæ˜¯ html å…ƒç´ çš„çˆ¶çº§ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸æ˜¯ä¸€ä¸ªçœŸçš„èŠ‚ç‚¹çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦å†™è¿™ä¸ªèŠ‚ç‚¹ï¼

å®ƒä¿å­˜äº†å„ç§å„æ ·çš„æ–¹æ³•ï¼Œå¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°å„ç§å…ƒç´ èŠ‚ç‚¹ç­‰â€¦â€¦

å®ƒæ˜¯èŠ‚ç‚¹ï¼Œæ„å‘³ç€å®ƒæœ‰ `nodeType`

ğŸ’¡ï¼š `document` æœ‰çˆ¶çº§ï¼Ÿ

ä»€ä¹ˆå«çˆ¶çº§ï¼Ÿ

* ä»¥`parentNode`çš„è§’åº¦æ¥åˆ¤æ–­ -> å®ƒå’©æœ‰çˆ¶çº§ï¼Œè¿”å›å€¼æ˜¯`null` -> æ‰€ä»¥`document`å°±æ˜¯å¤´ï¼Œæ²¡æœ‰çˆ¶çº§ -> ä¹Ÿè®¸ä½ ä¼šé—®ï¼Œæ—¢ç„¶ä½ æ˜¯å¤´ï¼Œå¯ä½ åˆæ˜¯å¦‚ä½•å­˜åœ¨çš„å‘¢ï¼Ÿå°±åƒæ˜¯å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹ä¸€æ · -> ç‰¹æ®ŠèŠ‚ç‚¹
* ä»å¯¹è±¡æ‰€å±å…³ç³»ä¸Šï¼Œå®ƒæ˜¯å±äº`window`çš„ï¼ -> `document`ä¹Ÿæ˜¯ä¸€ä¸ªå…¨å±€å±æ€§å‘€ï¼

æ€»ä¹‹ï¼Œ `document` æ˜¯æ²¡æœ‰èŠ‚ç‚¹ä¸Šçš„çˆ¶çº§çš„ï¼

é‚£ `window` åˆæ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿ -> `window.parent`

æ€»ä¹‹ï¼Œå¯ä»¥æŠŠ `window` ç†è§£æˆç³»ç»Ÿå¯¹è±¡ï¼Œå¼€å¤©è¾Ÿåœ°ä¾èµ–è¿™ä¸œè¥¿å°±å­˜åœ¨äº†ï¼ -> ç³»ç»Ÿç»™çš„ï¼Œä½ å°±ç”¨å°±è¡Œäº†ï¼ä¸è¦ç®¡å®ƒæ˜¯æ€ä¹ˆæ¥çš„ï¼

ğŸ’¡ï¼šè‡ªå·±å†™çš„ç»„ä»¶çš„ nodeType æ˜¯å•¥ï¼Ÿ

1. ç¼–è¯‘åéƒ½æ˜¯å…ƒç´ äº†
2. å¯ä»¥è‡ªå·±å®šä¹‰

ğŸ’¡ï¼šå…„å¼ŸèŠ‚ç‚¹ï¼Ÿ

1. previousSibling -> ä¸Šä¸€ä¸ªåŒè¾ˆèŠ‚ç‚¹ -> ä¸€èˆ¬ä¸ç”¨ï¼Œå› ä¸ºä¸ä¼šæ“ä½œæ–‡æœ¬èŠ‚ç‚¹
2. nextSibling
3. previousELementSibling -> ä¸Šä¸€ä¸ªåŒè¾ˆå…ƒç´  -> æœ‰å…¼å®¹é—®é¢˜
4. nextELementSibling

ğŸ’¡ï¼šæŠŠæ·»åŠ æ–‡æœ¬è¯»ä½œã€ŒåŠ ç‚¹å­—ã€

å­—æ„å‘³ç€ä½ çœ‹å¾—è§çš„ä¸œè¥¿ï¼

ğŸ’¡ï¼šDOM æ“ä½œï¼Ÿ

ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰å‡ å¤§ç±»çš„æ“ä½œï¼š

1. åˆ›å»ºï¼ˆä¸‹è¾¹ä¸‰ä¸ªç‚¹æ˜¯åœ¨åˆ›å»ºåœ°çƒäººï¼Œä½†æˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºå¤–æ˜Ÿäººï¼‰

   1. `document.createElement('button')` -> å¸¸ç”¨
   2. `document.createTextNode('dadaa')` -> åŠ å­— -> å¸¸ç”¨
   3. `document.createComment('dada')` -> æœ‰å¤§ç”¨ï¼Œä¸å†™å†…å®¹å°±æ˜¯ç©ºæ³¨é‡Š -> ä½œç”¨ï¼Œç”¨ä½œå ä½ç¬¦ï¼Œå°†æ¥ä¼šæŠŠå…¶æ›¿æ¢æˆæˆ‘ä»¬æƒ³è¦çš„çœŸæ­£èŠ‚ç‚¹
   4. åˆ›å»ºå…¶å®ƒæ ‡å‡†ä¸‹çš„å…ƒç´ 

      1. åˆ›å»ºä¸€ä¸ªå…¶å®ƒå‘½åç©ºé—´é‡Œè¾¹çš„å…ƒç´ ï¼š`document.createElementNS`ï¼Œå¦‚ SVG æ ‡ç­¾ï¼Œå®ƒä¸æ˜¯çœŸæ­£çš„ HTML æ ‡ç­¾ï¼Œå®ƒåªæ˜¯æ–¹ä¾¿äº†æˆ‘ä»¬å†™åœ¨ HTML å†…éƒ¨ç½¢äº†ï¼Œå®ƒæ˜¯å¦ä¸€å¥—æ ‡å‡†ä¸‹çš„ä¸œè¥¿ -> åœ°çƒé‡Œè¾¹æ··å…¥äº†ä¸€ä¸ªå¤–æ˜Ÿäººï¼Œä½†è¿™ä¸ªäººçš„å‘¼å¸ä¸æ˜¯å¸æ°§æ°”çš„ï¼Œè€Œæ˜¯å…¶å®ƒçš„â€¦â€¦
2. åŠ å…¥åˆ°é¡µé¢å½“ä¸­ï¼ˆä¸œè¥¿åˆ›å»ºçš„å†å¥½ä¹Ÿæ²¡ç”¨ -> ä½ å¿…é¡»æŠŠå®ƒä»¬åŠ åˆ°é¡µé¢çš„ DOM ç»“æ„ä¸­å»å•Šï¼ï¼‰ -> æœ‰ä¸¤ç§å§¿åŠ¿åŠ 

   1. `parent.appendChild(ele)` -> æŠŠ `ele` æ·»åŠ åˆ°çˆ¶å…ƒç´ é‡Œè¾¹çš„æœ«å°¾
   2. `parent.insertBefore(ele,xxx)` -> æŠŠ `ele` æ’å…¥åˆ° `xxx` ä¹‹å‰ -> ä¸å¸¦ç©ºæ ¼

3. åˆ é™¤ã€æ›¿æ¢

   1. åˆ é™¤ -> `parent.removeChild(ele)` -> æŠŠ `parent` çš„å„¿å­ `ele` ç»™åˆ é™¤äº†ï¼
   2. æ›¿æ¢ -> `parent.replaceChild(ele,xxx)` -> ç”¨ `ele` æŠŠ `parent` çš„å„¿å­ `xxx` æ›¿æ¢äº†ï¼ -> `ele` æŠŠ `xxx` çš„ä½ç½®ç»™é¡¶äº†ï¼

ğŸ’¡ï¼šæ–‡æ¡£ç¢ç‰‡ï¼Ÿ

æ“ä½œæ–¹ä¾¿æ€§ + æ€§èƒ½ä¼˜åŒ– -> æ—¥å¸¸å¼€å‘å¾ˆéš¾æ‰¾åˆ°åº”ç”¨åœºæ™¯

æŠŠæ–‡æ¡£ç¢ç‰‡ -> çœ‹ä½œæ˜¯ ğŸ’Š -> åƒä¸‹å»ï¼Œå¤–å£³ä¼šè¢«åŒ–æ‰ï¼Œå‰©ä¸‹çš„è¯é¢—ç²’ä¼šè¢«æˆ‘ä»¬å¸æ”¶æ‰

æ–‡æ¡£ç¢ç‰‡ä¹Ÿæ˜¯å¦‚æ­¤ -> å¤–å±‚æ˜¯è™šæ‹Ÿçš„ï¼Œé‡Œå±‚æ‰æ˜¯çœŸæ­£æ˜¾ç¤ºåˆ°é¡µé¢é‡Œè¾¹çš„ä¸œè¥¿ï¼

``` js
let frag = document.createDocumentFragment();
```

å¯ä»¥æŠŠ `frag` çœ‹åšæ˜¯ä¸€ä¸ª HTML å…ƒç´ ï¼Œå®ƒæœ‰ HTML å…ƒç´ çš„ä¸€äº›æ–¹æ³•ï¼Œå¦‚ `appendChild` ï¼Œä½†å®ƒä¹Ÿæ²¡æœ‰ HTML å…ƒç´ çš„ä¸€äº›æ–¹æ³•ï¼Œå¦‚ `innerHTML`

``` html
<div id="div1"></div>
<script>
  let root = document.getElementById("div1");

  let frag = document.createDocumentFragment();
  let h2 = document.createElement("h2");
  h2.innerHTML = "Hello";
  frag.appendChild(h2);

  let ul = document.createElement("ul");
  ul.innerHTML = "<li>list1</li><li>list2</li><li>list3</li><li>list4</li>";
  frag.appendChild(ul);
  root.appendChild(frag);
</script>
```

æ•ˆæœï¼š

![æ–‡æ¡£ç¢ç‰‡](assets/img/2021-03-08-15-21-29.png)

> ä¸ºå•¥åœ¨å†™å•æ–‡ä»¶ç»„ä»¶æ—¶ï¼Œ `template` é‚£ä¸€å±‚ä¸è§äº†å‘¢ï¼Ÿ -> ä½¿ç”¨äº†æ–‡æ¡£ç¢ç‰‡

æ€»ä¹‹ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºé¡µé¢æŸä¸ªå…ƒç´ é‡Œè¾¹ï¼Œæ·»åŠ æ–‡æ¡£ç¢ç‰‡å…ƒç´ ï¼Œè€Œä¸”å®ƒè¿˜ä¸ä¼šæä¸€å±‚æ— å…³ä¸œè¥¿ï¼

æ–‡æ¡£ç¢ç‰‡çš„å¥½å¤„ï¼š

1. ä¸ä¼šå¤šå‡ºä¸€å±‚
2. æ€§èƒ½æ¯”è¾ƒé«˜

   1. æ‰€æœ‰çš„æ›´æ–°ã€é‡æ’ -> ä¸€æ¬¡æå®š -> ç±»ä¼¼äºæ¬å®¶ï¼Œä¸€ä»¶ä¸€ä»¶åœ°æ¬ï¼Œä¸€ä»¶ä¸€ä»¶åœ°æ•´ç†ï¼ˆä¼šæœ‰å®¶å…·çš„ä½ç½®è°ƒæ•´ï¼‰ vs ä¸€æ¬¡æ€§æ¬å®Œè¿›æ¥ï¼Œä¸€æ¬¡æ€§è§„åˆ’å¥½ï¼Œå“ªä¸ªå®¶å…·æ”¾å“ªä¸ªä½ç½®

å¦‚ä½•æ¯”è¾ƒä¸€ä¸ªä¸œè¥¿çš„æ€§èƒ½æ˜¯é«˜æ˜¯ä½ï¼Ÿ

æœ‰å¾ˆå¤šæ–¹å¼å¯ä»¥åšåˆ°ï¼Œä½†æœ€ç›´æ¥çš„æ–¹å¼è«è¿‡äºå†™ä¸¤ä¸ªç‰ˆæœ¬çš„ç¨‹åºè·‘èµ·æ¥ï¼Œçœ‹çœ‹è°å¿«è°æ…¢ï¼

> DOM æ“ä½œæ€§èƒ½æ²¡æœ‰é‚£ä¹ˆä¸å ªï¼Œå¦‚æœä½ åªå¾ªç¯ä¸€æ¬¡ï¼Œæ˜¾ç„¶çœ‹ä¸åˆ°å®ƒä»¬ä¹‹é—´çš„å·®å¼‚ -> å¾ªç¯ 10 ä¸‡æ¬¡å€’æ˜¯å¯ä»¥çœ‹åˆ°å·®å¼‚äº†ï¼ -> ä¸€èˆ¬ DOM ç»“æ„è¶Šå¤æ‚ï¼Œå·®å¼‚è¶Šæ˜æ˜¾ -> å¤šæå‡ æ¬¡ï¼Œå–ä¸ªå¹³å‡å€¼

å®éªŒç»„ï¼ˆç”¨æ–‡æ¡£ç¢ç‰‡ï¼‰ vs å¯¹ç…§ç»„ï¼ˆä¸ç”¨æ–‡æ¡£ç¢ç‰‡ï¼Œæ™®é€šæ’å…¥ï¼‰

> [å®éªŒç»„ï¼Ÿå¯¹ç…§ç»„ï¼Ÿè¿˜æ˜¯å‚»å‚»åˆ†ä¸æ¸…ï¼Œé‚£å°±è¯·çœ‹è¿™ç¯‡æ–‡ç« ](https://www.163.com/dy/article/FLS4DDSP05323H3L.html)

å¯¹ç…§ç»„ï¼š

``` js
 console.time('Test');
 for (let i = 0; i < 100000; i++) {
   let e1 = h2.cloneNode(true)
   let e2 = ul.cloneNode(true)
   root.appendChild(e1);
   root.appendChild(e2);
 }
 console.timeEnd('Test') //1922 ms
```

å®éªŒç»„ï¼š

``` js
console.time('Test');
for (let i = 0; i < 100000; i++) {
  // true æ˜¯æ·±å…‹éš†ï¼Œè¡¨ç¤ºåä»£å…ƒç´ ä¹Ÿ clone äº†ï¼Œå¦‚æœä¸åŠ ï¼Œé‚£å°±å€¼ clone æœ€å¤–è¾¹ä¸€å±‚äº†
  // å¯¹äºæ–‡æ¡£ç¢ç‰‡è€Œè¨€ï¼Œé‚£å°±æ˜¯æ— äº†ï¼
  let ele = frag.cloneNode(true);
  root.appendChild(ele);
}
console.timeEnd('Test') //903 ms
```

**å¤§æ¦‚æ˜¯ 2 å€å·®è· -> è§†é¢‘é‡Œçš„æµ‹è¯•æ˜¯ 3 å€å·®è·**

ä¸çŸ¥é“çš„ç‚¹ï¼š

å¾ªç¯åœ°ä¸ºä¸€ä¸ªå…ƒç´ çš„é‡Œè¾¹è¿½åŠ ä¸€æ ·çš„ DOM å…ƒç´ æ˜¯ä¸è¡Œçš„ï¼

![åªæ¸²æŸ“ä¸€æ¬¡](assets/img/2021-03-08-16-06-46.png)

`appendChild(xxx)`æœ‰ä¸€ä¸ªç‰¹æ€§ -> `xxx`è¿™ä¸ªå…ƒç´ åªä¼šåœ¨é¡µé¢å­˜åœ¨ä¸€ä»½ï¼Œé‡å¤æ·»åŠ æ˜¯ä¸è¡Œçš„ -> å°±åƒæ˜¯ A æœ‰ä¸ªæˆ¿å­ï¼ŒA æŠŠæˆ¿å­å–ç»™äº† Bï¼Œé‚£ä¹ˆè¿™ä¸ªæˆ¿å­å°±ä¸å±äº A äº†ï¼

![append](assets/img/2021-03-08-17-23-01.png)

åŒæ ·ï¼Œå¦‚æœä½ åœ¨å†…å­˜é‡Œè¾¹åˆ›å»ºäº†ä¸€ä¸ªæ–‡æ¡£ç¢ç‰‡`frag`ï¼Œä½ æŠŠ`span`æ·»åŠ åˆ°`frag`æ——ä¸‹ï¼Œé‚£ä¹ˆè¿™ä¸ª`span`å°±ä»é¡µé¢æ¶ˆå¤±äº†ï¼

è¯´ç™½äº†ï¼Œ`appendChild(xxx)`è¿™ä¸ª`xxx`å…ƒç´ ï¼Œä¼šä¸åŸæ¥æ‰€é™„ç€çš„å…ƒç´ è‡ªåŠ¨è„±é’©ï¼

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨æµ‹è¯•çš„æ—¶å€™è¦`cloneNode`äº†ï¼Œä¸ç„¶ï¼Œä½ é‡å¤`appendChild`åŒä¸€ä¸ªå…ƒç´ åˆ°é¡µé¢ä¸­å»çš„è¯ï¼Œç›¸å½“äºï¼Œä¸æ–­åœ°åˆ é™¤å®ƒï¼Œç„¶åå†æ·»åŠ ä¹‹â€¦â€¦

---

å¹³æ—¶ä¼˜åŒ–æ€§èƒ½æœ‰ä¸ª 20%~30% å°±å·²ç»éå¸¸ä¸é”™äº†ï¼Œè€Œç°åœ¨ç”¨äº†æ–‡æ¡£ç¢ç‰‡ï¼Œæ€§èƒ½å°±æœ‰äº†æå¤§çš„æå‡â€¦â€¦

---

æ¥ä¸‹æ¥æ¢ç©¶ä¸€ä¸‹å¾ªç¯ï¼š

1. åœ¨ vue é‡Œè¾¹ï¼Œæˆ‘ä»¬ç”¨`v-for`
2. åœ¨ react é‡Œè¾¹ï¼Œæˆ‘ä»¬ç”¨`map`

å‰ç«¯å‘é€ ajax è¯·æ±‚ï¼Œæ‹¿åˆ°ä¸€ä¸ªæ•°ç»„ -> æˆ‘ä»¬éœ€è¦éå†è¿™ä¸ªæ•°ç»„ï¼Œæ‹¿åˆ°ç›¸åº”çš„æ•°æ®ï¼Œæ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼
