### ✍️ Tangxt ⏳ 2020-11-20 🏷️ DOM

# 第三章 DOM Ready

> 深入剖析什么是 DOM Ready，了解什么是浏览器渲染引擎，判断 DOM 是否 Ready 的意义，学会自己编写浏览器兼容的 domReady，最后通过实例来比较 window.onload 与 domReady 的不同之处。

## ★什么是 domReady

1）需求：把这段文字变成红色

![需求](assets/img/2020-11-21-00-51-38.png)

要求用「JS + DOM」实现

根据之前所学到的内容，我们这样做：

![没有变色](assets/img/2020-11-21-00-55-12.png)

可以看到这没有预期的显示红色

打开控制台：

![无法读这个 style 属性](assets/img/2020-11-21-00-57-18.png)

> 这个报错读法：不能读取一个空元素的`style`属性

通过这个错误，我们基本能推断出我们的 JS 代码并没有找到这个`h1`元素

2）为什么会报错？

回到代码来看，在这个页面（`.html`这个源码文件）里边，明明就有一个包含`id`为`header`的`h1`元素呀！

其实，出现这个问题就是我们**没有分清 HTML 标签和 DOM 节点之间的区别**的缘故了！

HTML 是一种标记语言，它告诉我们这个页面有什么内容，但**行为交互是需要通过 DOM 操作来实现**的，我们千万不要认为：

![这不是一个 DOM](assets/img/2020-11-21-01-13-09.png)

> 我们的 JS 代码操作的 DOM 节点，可不是 HTML 代码里边直接的元素标签！-> 浏览器执行 JS 代码的时候，h1 元素标签还未变成一个 DOM 节点嘞！-> 菜都没买，你说你让我怎么煮？煮西北风吗？

HTML 标签要通过浏览器解析才会变成 DOM 节点，当我们向地址栏里边传入一个 URL，敲下回车的时候，浏览器开始加载页面，之后我们就能看到内容了，而在这个期间，其实就有一个 DOM 节点构建的过程

**节点们是以「树」的形式组织的，当页面上所有的 HTML 都转化为节点以后，就叫做 DOM 树构建完毕，我们简称为「DOM Ready」**

那浏览器是如何将 HTML 标签解析变成 DOM 节点的呢？

实际上，浏览器是通过渲染引擎来实现的，渲染引擎的职责就是把请求的内容显示到浏览器屏幕上，默认情况下，渲染引擎可以显示 HTML/XML 文档以及图片，通过插件可以扩展浏览器的能力，使其可以渲染显示其它类型的文档，如安装「pdf viewer」插件就可以显示 pdf 文档了……

在这里，我们只了解渲染引擎的主要用途，即将 CSS 格式化的 HTML 与图片在浏览器上进行显示

![渲染引擎的主要用途](assets/img/2020-11-21-01-25-50.png)

## ★DOM 渲染引擎的渲染流程
