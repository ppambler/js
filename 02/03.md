### âœï¸ Tangxt â³ 2020-11-20 ğŸ·ï¸ DOM

# ç¬¬ä¸‰ç«  DOM Ready

> æ·±å…¥å‰–æä»€ä¹ˆæ˜¯ DOM Readyï¼Œäº†è§£ä»€ä¹ˆæ˜¯æµè§ˆå™¨æ¸²æŸ“å¼•æ“ï¼Œåˆ¤æ–­ DOM æ˜¯å¦ Ready çš„æ„ä¹‰ï¼Œå­¦ä¼šè‡ªå·±ç¼–å†™æµè§ˆå™¨å…¼å®¹çš„ domReadyï¼Œæœ€åé€šè¿‡å®ä¾‹æ¥æ¯”è¾ƒ window.onload ä¸ domReady çš„ä¸åŒä¹‹å¤„ã€‚

## â˜…ä»€ä¹ˆæ˜¯ domReady

### <mark>1ï¼‰éœ€æ±‚ï¼šæŠŠè¿™æ®µæ–‡å­—å˜æˆçº¢è‰²</mark>

![éœ€æ±‚](assets/img/2020-11-21-00-51-38.png)

è¦æ±‚ç”¨ã€ŒJS + DOMã€å®ç°

æ ¹æ®ä¹‹å‰æ‰€å­¦åˆ°çš„å†…å®¹ï¼Œæˆ‘ä»¬è¿™æ ·åšï¼š

![æ²¡æœ‰å˜è‰²](assets/img/2020-11-21-00-55-12.png)

å¯ä»¥çœ‹åˆ°è¿™æ²¡æœ‰é¢„æœŸçš„æ˜¾ç¤ºçº¢è‰²

æ‰“å¼€æ§åˆ¶å°ï¼š

![æ— æ³•è¯»è¿™ä¸ª style å±æ€§](assets/img/2020-11-21-00-57-18.png)

> è¿™ä¸ªæŠ¥é”™è¯»æ³•ï¼šä¸èƒ½è¯»å–ä¸€ä¸ªç©ºå…ƒç´ çš„ `style` å±æ€§

é€šè¿‡è¿™ä¸ªé”™è¯¯ï¼Œæˆ‘ä»¬åŸºæœ¬èƒ½æ¨æ–­å‡ºæˆ‘ä»¬çš„ JS ä»£ç å¹¶æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ª `h1` å…ƒç´ 

### <mark>2ï¼‰ä¸ºä»€ä¹ˆä¼šæŠ¥é”™ï¼Ÿ</mark>

å›åˆ°ä»£ç æ¥çœ‹ï¼Œåœ¨è¿™ä¸ªé¡µé¢ï¼ˆ `.html` è¿™ä¸ªæºç æ–‡ä»¶ï¼‰é‡Œè¾¹ï¼Œæ˜æ˜å°±æœ‰ä¸€ä¸ªåŒ…å« `id` ä¸º `header` çš„ `h1` å…ƒç´ å‘€ï¼

å…¶å®ï¼Œå‡ºç°è¿™ä¸ªé—®é¢˜å°±æ˜¯æˆ‘ä»¬**æ²¡æœ‰åˆ†æ¸… HTML æ ‡ç­¾å’Œ DOM èŠ‚ç‚¹ä¹‹é—´çš„åŒºåˆ«**çš„ç¼˜æ•…äº†ï¼

HTML æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªé¡µé¢æœ‰ä»€ä¹ˆå†…å®¹ï¼Œä½†**è¡Œä¸ºäº¤äº’æ˜¯éœ€è¦é€šè¿‡ DOM æ“ä½œæ¥å®ç°**çš„ï¼Œæˆ‘ä»¬åƒä¸‡ä¸è¦è®¤ä¸ºï¼š

![è¿™ä¸æ˜¯ä¸€ä¸ª DOM](assets/img/2020-11-21-01-13-09.png)

> æˆ‘ä»¬çš„ JS ä»£ç æ“ä½œçš„ DOM èŠ‚ç‚¹ï¼Œå¯ä¸æ˜¯ HTML ä»£ç é‡Œè¾¹ç›´æ¥çš„å…ƒç´ æ ‡ç­¾ï¼-> æµè§ˆå™¨æ‰§è¡Œ JS ä»£ç çš„æ—¶å€™ï¼Œh1 å…ƒç´ æ ‡ç­¾è¿˜æœªå˜æˆä¸€ä¸ª DOM èŠ‚ç‚¹å˜ï¼-> èœéƒ½æ²¡ä¹°ï¼Œä½ è¯´ä½ è®©æˆ‘æ€ä¹ˆç…®ï¼Ÿç…®è¥¿åŒ—é£å—ï¼Ÿ

HTML æ ‡ç­¾è¦é€šè¿‡æµè§ˆå™¨è§£ææ‰ä¼šå˜æˆ DOM èŠ‚ç‚¹ï¼Œå½“æˆ‘ä»¬å‘åœ°å€æ é‡Œè¾¹ä¼ å…¥ä¸€ä¸ª URLï¼Œæ•²ä¸‹å›è½¦çš„æ—¶å€™ï¼Œæµè§ˆå™¨å¼€å§‹åŠ è½½é¡µé¢ï¼Œä¹‹åæˆ‘ä»¬å°±èƒ½çœ‹åˆ°å†…å®¹äº†ï¼Œè€Œåœ¨è¿™ä¸ªæœŸé—´ï¼Œå…¶å®å°±æœ‰ä¸€ä¸ª DOM èŠ‚ç‚¹æ„å»ºçš„è¿‡ç¨‹

**èŠ‚ç‚¹ä»¬æ˜¯ä»¥ã€Œæ ‘ã€çš„å½¢å¼ç»„ç»‡çš„ï¼Œå½“é¡µé¢ä¸Šæ‰€æœ‰çš„ HTML éƒ½è½¬åŒ–ä¸ºèŠ‚ç‚¹ä»¥åï¼Œå°±å«åš DOM æ ‘æ„å»ºå®Œæ¯•ï¼Œæˆ‘ä»¬ç®€ç§°ä¸ºã€ŒDOM Readyã€**

é‚£æµè§ˆå™¨æ˜¯å¦‚ä½•å°† HTML æ ‡ç­¾è§£æå˜æˆ DOM èŠ‚ç‚¹çš„å‘¢ï¼Ÿ

å®é™…ä¸Šï¼Œæµè§ˆå™¨æ˜¯é€šè¿‡æ¸²æŸ“å¼•æ“æ¥å®ç°çš„ï¼Œæ¸²æŸ“å¼•æ“çš„èŒè´£å°±æ˜¯**æŠŠè¯·æ±‚çš„å†…å®¹æ˜¾ç¤ºåˆ°æµè§ˆå™¨å±å¹•ä¸Š**ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¸²æŸ“å¼•æ“å¯ä»¥**æ˜¾ç¤º HTML/XML æ–‡æ¡£ä»¥åŠå›¾ç‰‡**ï¼Œé€šè¿‡æ’ä»¶å¯ä»¥æ‰©å±•æµè§ˆå™¨çš„èƒ½åŠ›ï¼Œä½¿å…¶å¯ä»¥æ¸²æŸ“æ˜¾ç¤ºå…¶å®ƒç±»å‹çš„æ–‡æ¡£ï¼Œå¦‚å®‰è£…ã€Œpdf viewerã€æ’ä»¶å°±å¯ä»¥æ˜¾ç¤º pdf æ–‡æ¡£äº†â€¦â€¦

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªäº†è§£æ¸²æŸ“å¼•æ“çš„ä¸»è¦ç”¨é€”ï¼Œå³å°† CSS æ ¼å¼åŒ–çš„ HTML ä¸å›¾ç‰‡åœ¨æµè§ˆå™¨ä¸Šè¿›è¡Œæ˜¾ç¤º

![æ¸²æŸ“å¼•æ“çš„ä¸»è¦ç”¨é€”](assets/img/2020-11-21-01-25-50.png)

## â˜…DOM æ¸²æŸ“å¼•æ“çš„æ¸²æŸ“æµç¨‹

### <mark>1ï¼‰ä½•ä¸ºæ¸²æŸ“</mark>

**æµè§ˆå™¨æŠŠè¯·æ±‚å¾—åˆ°çš„ HTML å†…å®¹æ˜¾ç¤ºå‡ºæ¥çš„è¿‡ç¨‹**ï¼Œæ¸²æŸ“å¼•æ“é¦–å…ˆé€šè¿‡ç½‘ç»œè·å¾—æ‰€è¯·æ±‚æ–‡æ¡£çš„å†…å®¹ï¼Œé€šå¸¸**ä»¥ 8k åˆ†å—çš„æ–¹æ³•**æ¥å®Œæˆ

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥äº†è§£ä¸€ä¸‹æ¸²æŸ“å¼•æ“åœ¨å–å¾—å†…å®¹ä¹‹åçš„åŸºæœ¬æ¸²æŸ“æµç¨‹ã€‚

### <mark>2ï¼‰åŸºæœ¬æ¸²æŸ“æµç¨‹</mark>

![HTML ç»“æ„åŸºæœ¬æ¸²æŸ“æµç¨‹](assets/img/2020-11-21-11-35-03.png)

1. è§£æ HTML ä»¥æ„å»º DOM æ ‘ï¼Œå³ã€Œ**æ„å»º DOM èŠ‚ç‚¹**ã€ï¼Œæ¸²æŸ“å¼•æ“å¼€å§‹è§£æ HTMLï¼Œå¹¶å°†æ ‡ç­¾è½¬åŒ–ä¸ºå†…å®¹æ ‘çš„ DOM èŠ‚ç‚¹
2. æ„å»ºæ¸²æŸ“æ ‘ï¼Œå³ã€Œ**è§£ææ ·å¼ä¿¡æ¯**ã€ï¼Œè§£æå¤–éƒ¨çš„ CSS æ–‡ä»¶ä»¥åŠ`style`æ ‡ç­¾ä¸­çš„æ ·å¼ä¿¡æ¯ï¼Œæ¸²æŸ“æ ‘ç”±ä¸€äº›åŒ…å«æœ‰å„ç§å±æ€§çš„çŸ©å½¢ç»„æˆï¼Œå®ƒä»¬å°†è¢«æŒ‰ç…§æ­£ç¡®çš„é¡ºåºæ˜¾ç¤ºåˆ°å±å¹•ä¸Š
3. å¸ƒå±€æ¸²æŸ“æ ‘ï¼Œå³ã€Œ**å¸ƒå±€ DOM èŠ‚ç‚¹**ã€ï¼Œæ‰§è¡Œå¸ƒå±€çš„è¿‡ç¨‹ï¼Œå®ƒå°†ç¡®å®šæ¯ä¸ªèŠ‚ç‚¹åœ¨å±å¹•ä¸Šçš„ç¡®åˆ‡åæ ‡
4. ç»˜åˆ¶æ¸²æŸ“æ ‘ï¼Œå³ã€Œ**ç»˜åˆ¶ DOM èŠ‚ç‚¹**ã€ï¼Œæ¸²æŸ“æ ‘æ„å»ºå¥½äº†ä»¥åï¼Œå†ä¸‹ä¸€æ­¥å°±æ˜¯ç»˜åˆ¶ï¼Œå³éå†æ¸²æŸ“æ ‘ï¼Œå¹¶ä½¿ç”¨ UI åç«¯å±‚æ¥ç»˜åˆ¶æ¯ä¸ªèŠ‚ç‚¹

ä»¥ä¸Šå°±æ˜¯ HTML åœ¨æµè§ˆå™¨é‡Œè¾¹çš„åŸºæœ¬æ¸²æŸ“è¿‡ç¨‹äº†ï¼

æ³¨æ„ï¼Œè¿™å¹¶ä¸åŒ…å«è§£æè¿‡ç¨‹ä¸­æµè§ˆå™¨åŠ è½½å¤–éƒ¨èµ„æºï¼Œæ¯”å¦‚å›¾ç‰‡ã€è„šæœ¬ã€iframe ç­‰ä¸€äº›çš„è¿‡ç¨‹ï¼Œè¯´ç™½äº†ï¼Œ**ä¸Šè¾¹å››æ­¥ä»…ä»…æ˜¯ HTML ç»“æ„çš„æ¸²æŸ“è¿‡ç¨‹**ï¼Œè€Œ**å¤–éƒ¨èµ„æºçš„åŠ è½½åœ¨ HTML ç»“æ„çš„æ¸²æŸ“è¿‡ç¨‹ä¸­æ˜¯è´¯ç©¿äºå§‹ç»ˆçš„**ï¼Œå³ä¾¿ç»˜åˆ¶ DOM èŠ‚ç‚¹å·²ç»å®Œæˆäº†ï¼Œè€Œå¤–éƒ¨èµ„æºä»ç„¶å¯èƒ½**æ­£åœ¨åŠ è½½æˆ–è€…æ˜¯å°šæœªåŠ è½½**

æ¥ä¸‹æ¥ï¼Œä»¥ Webkit æ¸²æŸ“å¼•æ“ä¸ºä¾‹æ¥æ¥çœ‹çœ‹æµè§ˆå™¨çš„ä¸»è¦æ¸²æŸ“æµç¨‹

### <mark>3ï¼‰Webkit ä¸»è¦æ¸²æŸ“æµç¨‹</mark>

![Webkit ä¸»è¦æ¸²æŸ“æµç¨‹](assets/img/2020-11-21-12-00-47.png)

1. HTML æ ‡ç­¾å…ƒç´ ç»è¿‡ HTML è§£æï¼Œ**ä¾æ® DOM æ ‡å‡†**ç”Ÿæˆ DOM æ ‘
2. CSS æ ·å¼ä»£ç ï¼Œç»è¿‡ CSS è§£ææˆæˆ‘ä»¬çš„**æ ·å¼è§„åˆ™**
3. Webkit ä½¿ç”¨`Attachment`æ¥è¿æ¥æˆ‘ä»¬çš„ DOM èŠ‚ç‚¹ï¼ˆDOM Treeï¼‰å’Œå¯è§†åŒ–ä¿¡æ¯ï¼ˆStyle Rulesï¼‰ï¼Œä»¥æ­¤æ¥æ„å»ºæ¸²æŸ“æ ‘ï¼Œæ¸²æŸ“æ ‘ç”±**æ¸²æŸ“å¯¹è±¡**æ¥ç»„æˆï¼Œå¹¶ä½¿ç”¨ã€Œ`Layout`ã€æ¥è¡¨ç¤ºå…ƒç´ çš„å¸ƒå±€
4. **éå†**æ¸²æŸ“æ ‘ï¼Œä¹Ÿå°±æ˜¯ã€ŒPaintingã€
5. åœ¨æµè§ˆå™¨ä¸Šè¾¹**ç»˜åˆ¶**å‡ºé¡µé¢ -> ã€ŒDisplayã€

Webkit ä¸»è¦æ¸²æŸ“æµç¨‹é‚£å¼ å›¾é‡Œè¾¹çš„**æ¯ä¸ªè“è‰²éƒ¨åˆ†éƒ½æ˜¯ä¸€ä¸ªç›¸å½“å¤æ‚çš„è¿ç®—**ï¼Œåœ¨è¿™é‡Œå°±ä¸ä¸€ä¸€å±•å¼€åœ°æ¥è®²äº†ï¼Œæµè§ˆå™¨å…·ä½“å†…éƒ¨å·¥ä½œåŸç†ï¼Œè¯·çœ‹ï¼š

* [å‰ç«¯å¿…è¯»ï¼šæµè§ˆå™¨å†…éƒ¨å·¥ä½œåŸç†_çŸ¥è¯†åº“_åšå®¢å›­](https://kb.cnblogs.com/page/129756/)
* [How browsers work](http://taligarsiel.com/Projects/howbrowserswork1.htm)

## â˜…domReady çš„å®ç°ç­–ç•¥

> å¦‚ä½•è·å¾—æµè§ˆå™¨ç»˜åˆ¶å®Œ DOM èŠ‚ç‚¹çš„æ—¶æœºæˆ–è€…è¯´å¦‚ä½•å¾—çŸ¥ DOM ä½•æ—¶ Readyï¼Ÿ

### <mark>1ï¼‰ä¸ºä»€ä¹ˆéœ€è¦ domReady</mark>

ä¹‹å‰æˆ‘ä»¬å†™çš„ä¾‹å­ä»£ç ï¼Œå…¶å®å¹¶å’©æœ‰è€ƒè™‘ DOM Ready çš„äº‹å„¿ï¼Œè€Œè²Œä¼¼è¿™ç¨‹åºä¹Ÿèƒ½æ­£å¸¸è¿è¡Œï¼Œæ²¡æœ‰æŠ¥é”™ï¼

å¦‚è¿™ä¸ªä¾‹å­ï¼š

![æ²¡æœ‰æŠ¥é”™](assets/img/2020-11-21-15-02-52.png)

è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¹¶å’©æœ‰è€ƒè™‘ã€ŒDOM Readyã€è¿™ä¸ªæ¦‚å¿µå°±å»å†™äº†ï¼Œä»…ä»…åªæ˜¯æŠŠ `script` æ ‡ç­¾å†™åˆ° `body` æ ‡ç­¾é‡Œè¾¹çš„æœ€åè¾¹å»äº†â€¦â€¦

æ‰€ä»¥ï¼Œä¸ºå•¥æˆ‘ä»¬è¿˜æœ‰è€ƒè™‘ã€ŒDOM Readyã€å‘¢ï¼Ÿç›´æ¥æŠŠ JS ä»£ç éƒ½æ”¾åˆ° `body` çš„åè¾¹å»ä¸å°±å¥½äº†å—ï¼Ÿ

äº‹å®ä¸Šï¼Œæˆ‘ä»¬åœ¨ç¼–å†™å¤§å‹åº”ç”¨ç¨‹åºçš„æ—¶å€™ JS æ–‡ä»¶å¾€å¾€éå¸¸å¾—å¤šï¼Œè€Œä¸”å®ƒä»¬ä¹‹é—´ç›¸äº’çš„è°ƒç”¨å¤§å¤šéƒ½æ˜¯å¤–éƒ¨å¼•ç”¨çš„ï¼Œä¸æŠŠä»£ç ç›´æ¥å†™åœ¨é¡µé¢ä¸Šï¼Œè¿™æ ·çš„è¯ï¼Œå¦‚æœæœ‰ä¸ªã€ŒDOM Readyã€è¿™æ ·çš„æ–¹æ³•ï¼Œæˆ‘ä»¬æƒ³è¦ç”¨åˆ°å®ƒå°±ç›´æ¥è°ƒç”¨å®ƒï¼Œä¸ç®¡è¿™é€»è¾‘ä»£ç å†™åœ¨å“ªå„¿ï¼Œéƒ½æ˜¯ç­‰åˆ°ã€ŒDOM Readyã€ä¹‹åæ‰å»æ‰§è¡Œçš„ï¼-> æ€»ä¹‹ï¼Œä¸€å¥è¯è¯´ä¹‹ã€Œ**ä¸ºäº†æ˜¾å¾—é«˜å¤§å°š**ã€

> å…¶å®å¾ˆé¸¡è‚‹â€¦â€¦

### <mark>2ï¼‰å¦‚ä½•å®ç° domReadyï¼Ÿ</mark>

#### <mark>1ã€ç”¨å®šæ—¶å™¨æ¥æï¼Ÿ</mark>

![å®šæ—¶å™¨](assets/img/2020-11-21-15-26-40.png)

æˆ‘ä»¬æƒ³è¦çš„æ˜¯ã€ŒdomReady ä¹‹åï¼Œæ–‡å­—å³å¯å˜æˆçº¢è‰²ã€ï¼Œè€Œä¸æ˜¯ã€ŒdomReady ä¹‹åä¸€æ®µæ—¶é—´ï¼Œæ‰å˜æˆçº¢è‰²ã€ï¼Œè¯´ç™½äº†ï¼Œæˆ‘ä»¬æƒ³è®©ç”¨æˆ·åªçœ‹åˆ°è¿™æ˜¯çº¢è‰²çš„æ–‡å­—ï¼Œä¸æ˜¯ã€Œä»é»‘å˜çº¢ã€è¿™æ ·ä¸€é—ªè€Œè¿‡â€¦â€¦

> å…¶å®ç”¨ `0` ms æ˜¯å¯ä»¥åšåˆ°ã€Œåªçœ‹åˆ°æ–‡å­—åªæ˜¯çº¢è‰²çš„æ•ˆæœã€çš„ï¼-> ä¸è¿‡ï¼ŒHTML å…ƒç´ è¿‡å¤šçš„è¯ï¼Œè¿™è¿˜æ˜¯ä¼šæœ‰æ–‡å­—é¢œè‰²å˜åŒ–çš„é—ªçƒè¿‡ç¨‹ï¼

æ‰€ä»¥ï¼Œæ­¤æ–¹æ³•ä¸å¯è¡Œâ€¦â€¦

#### <mark>2ã€ `window.onload`</mark>

`window.onload` ï¼š

1. æ˜¯ä¸€ä¸ªäº‹ä»¶
2. åœ¨æµè§ˆå™¨ç»˜åˆ¶å®Œ DOM èŠ‚ç‚¹å¹¶ä¸”å½“é¡µé¢ä¸Šæ‰€æœ‰çš„èµ„æºéƒ½åŠ è½½å®Œæ¯•ä»¥åæ‰ä¼šå»æ‰§è¡Œè‡ªå·±å®šä¹‰çš„é€»è¾‘ä»£ç ï¼Œä¹Ÿå°±æ˜¯`callback`å•¦ï¼

æ€»ä¹‹ï¼Œåœ¨æ–‡æ¡£æ‰€æœ‰çš„è§£ææ¸²æŸ“ã€èµ„æºåŠ è½½å®Œæˆä¹‹å‰ï¼Œä¸è®© JS ä»£ç æ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥å¦¥å¦¥åœ°**é¿å…äº†å›  JS æ“ä½œå…ˆäº DOM æ ‘åˆ›å»ºè€Œå¸¦æ¥çš„ bug**

``` js
window.onload = function() {
  document.getElementById("header").style.color = "red";
};
```

è§†é¢‘é‡Œçš„è®²è§£å¹¶å’©æœ‰é—ªçƒï¼Œå…¶å®è¿˜æ˜¯æœ‰ã€Œæ–‡å­—ç”±é»‘å˜çº¢ã€è¿™æ ·çš„è¿‡ç¨‹ï¼

è¿™ä¸ª API çš„å¼Šç«¯ï¼š

å¦‚æœæˆ‘ä»¬çš„é¡µé¢ä¸Šæœ‰ 100 å¼ è¿œç¨‹çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬éœ€è¦è®© JS åšåˆ°åœ¨ç‚¹å‡»æ¯å¼ å›¾ç‰‡çš„æ—¶å€™ `alert` å‡ºå›¾ç‰‡çš„ `src` å±æ€§

æŒ‰ç…§æˆ‘ä»¬ä¹‹å‰å¯¹æµè§ˆå™¨è§£ææ¸²æŸ“ HTML çš„æµç¨‹çš„è®¤è¯†ï¼Œæˆ‘ä»¬çŸ¥é“ DOM æ ‘å¾ˆå¿«å°±æ„å»ºå®Œæ¯•äº†ï¼Œè€Œ 100 å¼ å›¾ç‰‡è¿˜åœ¨ç¼“æ…¢çš„åŠ è½½ï¼Œè€Œä½ ç”¨è¿™ä¸ª `onload` æ–¹æ³•ï¼Œå¾—è¦ç­‰åˆ°å›¾ç‰‡éƒ½åŠ è½½å®Œæ¯•åï¼Œæ‰ä¼šå»æ‰§è¡Œ JS ä»£ç ï¼Œæ‰€ä»¥åœ¨åŠ è½½å›¾ç‰‡çš„è¿™ä¸ªé¡µé¢æœŸé—´ï¼Œä½ ä¸ç®¡æ€ä¹ˆç‚¹å‡»é¡µé¢éƒ½ä¸ä¼šå“åº”ä½ çš„ä»»ä½•æ“ä½œï¼Œå°±å¥½åƒ GG äº†ä¸€æ ·â€¦â€¦

è€Œåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œç”¨æˆ·å¾ˆæœ‰å¯èƒ½ä¸ä¼šç­‰åˆ°é¡µé¢æŠŠæ‰€æœ‰çš„ä¸œè¥¿éƒ½åŠ è½½å®Œæ¯•åæ‰å»æ“ä½œï¼Œäºæ˜¯å°±ä¼šå»ç‚¹é¡µé¢ï¼Œä½†é¡µé¢ä¸ç»™ç”¨æˆ·ä»»ä½•ååº”ï¼Œäºæ˜¯ç”¨æˆ·å°±ç”¨äº†éå¸¸è§£æ°”çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯æœæ–­å…³æ‰é¡µé¢æ¥è§£å†³ä¹‹ï¼Œå¹¶è¡¨ç¤ºã€Œå†ä¹Ÿä¸è®¿é—®è¿™ä¸ªé¡µé¢äº†ã€

æ‰€ä»¥ï¼Œåœ¨å®é™…åº”ç”¨ä¸­æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼Œè®©é¡µé¢åŠ è½½åå†åšä¸€äº›äº‹æƒ…ï¼Œæ¯”å¦‚ç»‘å®šäº‹ä»¶ã€DOM æ“ä½œæŸäº›èŠ‚ç‚¹ç­‰ç­‰ã€‚**ä½¿ç”¨ `onload` å¯¹äºå¾ˆå¤šå®é™…çš„åº”ç”¨è€Œè¨€æ˜¾å¾—æœ‰ç‚¹å¤ªè¿Ÿäº†ï¼Œæ¯”è¾ƒå½±å“æˆ‘ä»¬çš„ç”¨æˆ·ä½“éªŒ**

æ€»ä¹‹ï¼Œ `onload` æ˜¯æœ‰é—®é¢˜çš„ï¼Œæˆ‘ä»¬å¾—å¦æ‰¾ä¸€ä¸ªæ–¹æ¡ˆâ€¦â€¦

#### <mark>3ã€DOMContentLoaded äº‹ä»¶</mark>

> The `DOMContentLoaded` event fires when the initial HTML document has been completely loaded and parsed, without waiting for stylesheets, images, and subframes to finish loading.

![jQuery ready æ–¹æ³•](assets/img/2020-11-21-16-40-25.png)

> å…¶æ•ˆæœå°±åƒæ˜¯æˆ‘ä»¬ä¸ºè¿™ä¸ª HTMl å…ƒç´ å†™äº† `color:red` æ ·å¼ä¸€æ ·â€¦â€¦

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®éªŒçš„ä¾‹å­æ˜¯ jQuery ä¸­çš„ `ready` çš„æ–¹æ³•ï¼Œå…¶å®ç°é€»è¾‘æ˜¯è¿™æ ·çš„ï¼š

``` js
jQuery.ready.promise = function(obj) {
  if (!readyList) {

    readyList = jQuery.Deferred();

    // Catch cases where $(document).ready() is called after the browser event has already occurred.
    // we once tried to use readyState "interactive" here, but it caused issues like the one
    // discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
    if (document.readyState === "complete") {
      // Handle it asynchronously to allow scripts the opportunity to delay ready
      setTimeout(jQuery.ready);

      // Standards-based browsers support DOMContentLoaded
    } else if (document.addEventListener) {
      // Use the handy event callback
      document.addEventListener("DOMContentLoaded", completed, false);

      // A fallback to window.onload, that will always work
      window.addEventListener("load", completed, false);

      // If IE event model is used
    } else {
      // Ensure firing before onload, maybe late but safe also for iframes
      document.attachEvent("onreadystatechange", completed);

      // A fallback to window.onload, that will always work
      window.attachEvent("onload", completed);

      // If IE and not a frame
      // continually check to see if the document is ready
      var top = false;

      try {
        top = window.frameElement == null && document.documentElement;
      } catch (e) {}

      if (top && top.doScroll) {
        (function doScrollCheck() {
          if (!jQuery.isReady) {

            try {
              // Use the trick by Diego Perini
              // http://javascript.nwbox.com/IEContentLoaded/
              top.doScroll("left");
            } catch (e) {
              return setTimeout(doScrollCheck, 50);
            }

            // detach all dom ready events
            detach();

            // and execute any waiting functions
            jQuery.ready();
          }
        })();
      }
    }
  }
  return readyList.promise(obj);
};
```

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä»£ç å‡ºç°äº†`readyState`ã€`DOMContentLoaded`ã€`onreadystatechange`ç­‰è¿™æ ·çš„å­—çœ¼ï¼Œä½†è¿™äº›è·Ÿæˆ‘ä»¬çš„ domReady æœ‰å•¥å…³ç³»å‘¢ï¼Ÿ

å…ˆä»`DOMContentLoaded`è¿™ä¸ª API è¯´èµ·ï¼Œå†å»äº†è§£å®ƒä»¬ä¹‹é—´çš„å…³ç³»

### <mark>3ï¼‰DOMReady å®ç°ç­–ç•¥</mark>

å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¼šæŠŠ JS é€»è¾‘å†™åˆ°`window.onload`å›è°ƒé‡Œè¾¹ï¼Œä»¥é˜²æ­¢ DOM æ ‘è¿˜æœªå»ºå®Œå°±å¼€å§‹å¯¹èŠ‚ç‚¹è¿›è¡Œæ“ä½œï¼Œä»è€Œå¯¼è‡´é”™è¯¯â€¦â€¦

è€Œå¯¹å¾ˆå¤šå®é™…åº”ç”¨æ¥è¯´ï¼Œæˆ‘ä»¬**è¶Šæ—©ä»‹å…¥å¯¹ DOM çš„å¹²æ¶‰è¶Šå¥½**ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿›è¡Œç‰¹å¾æ£€æµ‹ã€äº‹ä»¶ç»‘å®šã€DOM æ“ä½œå•¥çš„â€¦â€¦

DOMReady å®ƒå¯ä»¥æ»¡è¶³ç”¨æˆ·æå‰ç»‘å®šäº‹ä»¶çš„éœ€æ±‚ï¼Œå› ä¸ºæœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é¡µé¢çš„å›¾ç‰‡ç­‰å¤–éƒ¨èµ„æºè¿‡å¤šï¼Œä¼šå¯¼è‡´`window.onload`è¿Ÿè¿Ÿä¸èƒ½è§¦å‘ï¼Œè¿™æ—¶å€™å¦‚æœè¿˜å’©æœ‰ç»‘å®šäº‹ä»¶ï¼Œé‚£ä¹ˆç”¨æˆ·ç‚¹å‡»ä»»ä½•æŒ‰é’®éƒ½æ²¡æœ‰ååº”ï¼Œå½“ç„¶ï¼Œé™¤äº†`a`é“¾æ¥ä¹‹å¤–â€¦â€¦è¿™æ ·çš„è¯ï¼Œå°±ä¼šä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒ

å°±ä¸‹æ¥å°±æ¥ç ”ç©¶ä¸€ä¸‹ DOMReady çš„å®ç°ç­–ç•¥

æˆ‘ä»¬ä¸ºäº†è§£å†³`window.onload`çš„çŸ­æ¿ï¼Œw3c ç»ˆäºæä¾›äº†ä¸€ä¸ªå«`DOMContentLoaded`è¿™æ ·ä¸€ä¸ªäº‹ä»¶ï¼Œä¸`onload`äº‹ä»¶ç›¸æ¯”ï¼Œè¯¥äº‹ä»¶è§¦å‘çš„æ—¶æœºæ›´æ—©ï¼å®ƒæ˜¯**åœ¨é¡µé¢çš„ DOM æ ‘åˆ›å»ºå®Œæˆä»¥åï¼Œä¹Ÿå°±æ˜¯ HTML è§£æç¬¬ä¸€æ­¥å®Œæˆå³è§¦å‘ï¼Œè€Œæ— éœ€ç­‰å¾…å…¶å®ƒèµ„æºçš„åŠ è½½**ï¼

ä½†å¯¹äºä½ç‰ˆæœ¬çš„ IE è€Œè¨€ï¼Œè¿™ä¸ªäº‹ä»¶å¹¶ä¸æ”¯æŒï¼Œæ‰€ä»¥æˆ‘ä»¬è¯¥å’‹åŠå‘¢ï¼Ÿ

ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬å‹‰å¼ºä½¿ç”¨`onreadystatechange`è¿™ä¸ªäº‹ä»¶æ¥æ¨¡æ‹Ÿï¼Œä½†ç›´åˆ°æœ‰ä¸€å¤©æœ‰ä¸€ä¸ªå¤–å›½çš„å¤§ç‰›ï¼Œä»–å‘æ˜å‡ºäº†`doScroll`è¿™ä¸ªä¼Ÿå¤§çš„ hackï¼Œè¿™ä¸ª hack å¯ä»¥è®©æˆ‘ä»¬åœ¨ä½ç‰ˆæœ¬ IE ä¸‹è¾¹å®ç°æ›´æ¥è¿‘`DOMContentLoaded`è¿™ä¸ªäº‹ä»¶çš„æ•ˆæœï¼Œäºæ˜¯æˆ‘ä»¬å°±æœ‰äº†ä¸‹é¢ä¸¤å¥—ç­–ç•¥ï¼š

![DOMReady å®ç°ç­–ç•¥](assets/img/2020-11-21-17-08-18.png)

å›é¡¾ jQuery çš„`ready`æºç ï¼š

1. åˆ¤æ–­`document.readyState === "complete"`æ˜¯å¦ä¸º`true`ï¼Œå¦‚æœæ˜¯ï¼Œé‚£å°±è¯´æ˜æ—¶æœºåˆ°äº†ï¼Œå¯ä»¥æ‰§è¡Œ`ready`æ–¹æ³•äº† -> ä¹Ÿå°±æ˜¯æ‰§è¡Œ`callback`
2. å¦‚æœæ˜¯ç°ä»£æµè§ˆå™¨æ”¯æŒ`DOMContentLoaded`è¿™ä¸ªäº‹ä»¶ï¼Œæˆ‘ä»¬ç›´æ¥å°±å¯ä»¥ä¸ºé¡µé¢ç»‘å®šè¿™ä¸ª`DOMContentLoaded`äº‹ä»¶ï¼Œè¯¥äº‹ä»¶è§¦å‘ï¼Œå°±å¯ä»¥æ‰§è¡Œæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ä»£ç ã€‚è€Œä¸”ç­‰æ‰€æœ‰èµ„æºéƒ½åŠ è½½å®Œæ¯•åï¼Œè¿˜ä¼šæ‰§è¡Œä¸€é`callback`
3. å¦‚æœæ˜¯ IE çš„ä½ç‰ˆæœ¬æµè§ˆå™¨å¹¶ä¸”æ˜¯`frame`çš„è¯ï¼Œå°±ä½¿ç”¨`onreadystatechange`è¿™ä¸ªäº‹ä»¶ï¼ŒåŒæ ·ä¹Ÿç»‘å®šäº†`onload`äº‹ä»¶ã€‚ä½†å¦‚æœçª—å£ä¸æ˜¯`frame`ï¼Œé‚£å°±æ‰§è¡Œé‚£ä¸ªåˆ©ç”¨äº†`doScroll`çš„ hack ä»£ç 

ç›®å‰æˆ‘ä»¬ç®€è¦çš„çœ‹äº†ä¸€ä¸‹ jQuery çš„ domReady å®ç°ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è‡ªå·±ä¹Ÿè¦å®ç°ä¸€ä¸ª domReady

ğŸ’¡ï¼š`Document.readyState`ï¼Ÿ

The `Document.readyState` property describes the loading state of the `document`.

When the value of this property changes, a `readystatechange` event fires on the `document` object.

![readyState](assets/img/2020-11-21-17-17-45.png)

ğŸ’¡ï¼š`addEventListener`çš„ç¬¬äºŒä¸ªå‚æ•°`completed`ï¼Ÿ

``` js
document.addEventListener( "DOMContentLoaded", completed, false );
```

é¢â€¦â€¦å®ƒå°±æ˜¯ä¸€ä¸ªå‡½æ•°åå­—å‘€ï¼DOM æ„å»ºå®Œæ¯•ï¼Œå°±ä¼šæ‰§è¡Œè¿™ä¸ª`completed`æ–¹æ³•ï¼Œè€Œè¯¥æ–¹æ³•ä½“é‡Œè¾¹ä¼š`jQuery.ready()` -> æ€»ä¹‹ï¼Œè¿™æœ€åä¼šæ‰§è¡Œä½ ä¼ ç»™`ready`çš„`callback`å‡½æ•°å“ˆï¼

## â˜…domReady çš„å®ç°

### <mark>1ï¼‰ä»£ç å®ç°</mark>

``` js
function myReady(fn) {
  // å¯¹äºç°ä»£æµè§ˆå™¨ï¼Œå¯¹ DOMContentLoaded äº‹ä»¶çš„å¤„ç†é‡‡ç”¨æ ‡å‡†çš„äº‹ä»¶ç»‘å®šæ–¹å¼
  if (document.addEventListener) {
    // ç»‘å®š w3c ç»™æˆ‘ä»¬å®šä¹‰å¥½çš„ DOMContentLoaded äº‹ä»¶ï¼Œå°±èƒ½å®ç°ä¾¦æµ‹ DOMReady äº†
    // DOMReady ä»¥åï¼Œæ‰å»è°ƒç”¨ fn
    // false è¡¨ç¤ºåœ¨å†’æ³¡é˜¶æ®µæ•è·
    document.addEventListener("DOMContentLoaded", fn, false);
  } else {
    // å¦‚æœæ˜¯ IE ä½ç‰ˆæœ¬æµè§ˆå™¨ï¼Œå°±è°ƒç”¨æˆ‘ä»¬å®ç°çš„ IEContentLoaded æ–¹æ³•
    IEContentLoaded(fn);
  }

  // IE æ¨¡æ‹Ÿ DOMContentLoaded
  function IEContentLoaded(fn) {
    // æŠŠ window.document ç¼“å­˜åˆ°ä¸€ä¸ªå˜é‡é‡Œï¼Œä»¥æ­¤æ¥è®©ä»£ç æ›´ç®€æ´
    var d = window.document;
    // æ ‡è®°å˜é‡
    var done = false;

    // åªæ‰§è¡Œä¸€æ¬¡ç”¨æˆ·çš„å›è°ƒå‡½æ•° init()
    var init = function () {
      if (!done) {
        done = true;
        fn();
      }
    };

    // å¦‚æœ document çš„åŠ è½½çŠ¶æ€æ˜¯æœªå°±ç»ªï¼Œæˆ‘ä»¬å¦‚ä½•å°½å¿«åœ°ä¾¦æµ‹åˆ° DOMReadyï¼Ÿ
    // å¹¶ç«‹å³è°ƒç”¨æˆ‘ä»¬çš„å›è°ƒå‡½æ•° fnï¼Ÿ
    (function () {
      // å®šä¹‰ä¸€ä¸ª try catch è¯­å¥
      try {
        // DOM æ ‘æœªåˆ›å»ºå®Œä¹‹å‰è°ƒç”¨ doScroll ä¼šæŠ›å‡ºé”™è¯¯
        d.documentElement.doScroll("left");
      } catch (e) {
        // å»¶è¿Ÿå†è¯•ä¸€æ¬¡~
        // arguments.callee æ˜¯å‡½æ•°è‡ªèº«ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªåŒ¿åå‡½æ•° function
        setTimeout(arguments.callee, 50);
        // é€šè¿‡ç›´æ¥ return æ¥å®ç°é€’å½’â€¦â€¦
        return;
      }
      // æ²¡æœ‰é”™è¯¯å°±è¡¨ç¤º DOM æ ‘åˆ›å»ºå®Œæ¯•ï¼Œç„¶åç«‹é©¬æ‰§è¡Œç”¨æˆ·å›è°ƒ
      init();
    })();

    // ç›‘å¬ document çš„åŠ è½½çŠ¶æ€
    d.onreadystatechange = function () {
      // å¦‚æœç”¨æˆ·æ˜¯åœ¨ domReady ä¹‹åç»‘å®šçš„å‡½æ•°ï¼Œå°±ç«‹é©¬æ‰§è¡Œ
      if (d.readyState == "complete") {
        // æŠŠæ¸…é™¤ onreadystatechange è¿™ä¸ªäº‹ä»¶æ¸…é™¤æ‰
        d.onreadystatechange = null;
        init();
      }
    };
  }
}
```

### <mark>2ï¼‰ä»£ç è§£æ</mark>

1. `fn`å½¢å‚æ˜¯ DOM Ready ä»¥åè¦æ‰§è¡Œçš„å›è°ƒå‡½æ•°
2. åœ¨ IE ä¸‹å®Œç¾å®ç°æ¨¡æ‹Ÿçš„ `DOMContentLoaded`ï¼š
   1. æä¸ªåªæ‰§è¡Œä¸€æ¬¡`fn`çš„`init`å‡½æ•°
   2. ç›‘å¬`document`çš„åŠ è½½çŠ¶æ€ï¼Œå¦‚æœç”¨æˆ·åœ¨`domReady`ä¹‹åç»‘å®šäº†å‡½æ•°ï¼Œé‚£å°±ç«‹é©¬æ‰§è¡Œ`init`å‡½æ•° -> å…³æ³¨`complete`å€¼
   3. å¦‚æœ`document`çš„`readyState`è¿˜æ˜¯`loading`ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä»¥`50 ms`çš„æ—¶é—´é—´éš”ï¼Œæ¥è½®è¯¢é—®å€™æµè§ˆæ˜¯å¦å·²ç»æŠŠ DOM æ ‘åˆ›å»ºå¥½äº†ï¼Œå¦‚æœåˆ›å»ºå¥½äº†ï¼Œé‚£å°±æ‰§è¡Œ`init`å‡½æ•° -> å…³æ³¨`loading`å€¼ï¼Œæƒ³å°½å¿«åœ¨ DOM æ ‘åˆ›å»ºå®Œæˆçš„ç¬¬ä¸€æ—¶é—´å†…ï¼Œæ‰§è¡Œ`init`å‡½æ•°â€¦â€¦
3. é€šè¿‡åˆ¤æ–­`addEventListener`è¿™ä¸ªæ–¹æ³•æ˜¯å¦å­˜åœ¨æ¥åˆ¤æ–­è¿™æµè§ˆå™¨æ˜¯å¦æ˜¯ç°ä»£æµè§ˆå™¨ -> è¿™æ˜¯ä¸€ç§å…¸å‹çš„é€šè¿‡ã€Œèƒ½åŠ›æ£€æµ‹ã€æ¥åŒºåˆ†æµè§ˆå™¨çš„æ–¹æ³• -> ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ JS è¯¢é—®æµè§ˆå™¨ä½ æœ‰`addEventListener`è¿™ä¸ªèƒ½åŠ›å—ï¼Ÿ
   1. æœ‰è¿™èƒ½åŠ›ï¼Œå°±ä¸º`document`ç»‘å®š`DOMContentLoaded`äº‹ä»¶
   2. æ²¡æœ‰è¿™èƒ½åŠ›ï¼Œé‚£å°±è°ƒç”¨æˆ‘ä»¬å®ç°çš„`IEContentLoaded`æ–¹æ³•

---

`myReady`è¿™ä¸ªæ–¹æ³•çš„å®ç°æ€è·¯è·Ÿ jQuery çš„å¤§åŒå°å¼‚ã€‚

æ¥ä¸‹æ¥å°±æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œæˆ‘ä»¬å†™çš„è¿™ä¸ª`myReady`æ–¹æ³•çµå…‰ä¸çµå…‰ï¼Ÿ

ä¾‹å­è¿˜æ˜¯åŸæ¥é‚£ä¸ªæŠŠæ–‡å­—å˜æˆçº¢è‰²çš„ä¾‹å­ï¼š

![é—ªåŠ¨çš„ bug](assets/img/2020-11-21-19-33-03.png)

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å†™åˆ°è¿™ä¸ª`domReady`æ–¹æ³•ï¼ˆå…¼å®¹ IE7ã€ç°ä»£æµè§ˆå™¨ï¼‰å®Œç¾å®ç°äº† domReady ï¼

---

è¯è¯´ï¼Œå„å¤§ä¸»æµæ¡†æ¶çš„ DOMReady æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ

- Prototype
- jQeury
- moontools
- dojo
- yui
- ext

- [è½¬- ä¸»æµ JS æ¡†æ¶ä¸­ DOMReady äº‹ä»¶çš„å®ç° - Lorz - åšå®¢å›­](https://www.cnblogs.com/JulyZhang/archive/2011/02/12/1952484.html)
- [ä¸»æµ JS æ¡†æ¶ä¸­ DOMReady äº‹ä»¶çš„å®ç° - å±±å“¥çš„ä¸ªäººç©ºé—´ - OSCHINA - ä¸­æ–‡å¼€æºæŠ€æœ¯äº¤æµç¤¾åŒº](https://my.oschina.net/jsan/blog/86801)
- [JS DOMReady äº‹ä»¶çš„å…­ç¨®å¯¦ç¾æ–¹æ³•ç¸½çµ - ç¨‹å¼å‰æ²¿](https://codertw.com/%E5%89%8D%E7%AB%AF%E9%96%8B%E7%99%BC/252665/)

## â˜…domReady ç»¼åˆæ¡ˆä¾‹

é€è¿‡ä¸€ä¸ªç»¼åˆæ¡ˆä¾‹ï¼Œæ¥çœŸå®çš„æ„Ÿå—ä¸€ä¸‹`window.onload`ä¸`domReady`-> æ‰§è¡Œæ—¶æœºçš„ä¸åŒç‚¹

æµ‹è¯•é€»è¾‘ï¼š

> å‡†å¤‡ 6 å¼ è¶…é«˜æ¸…çš„å£çº¸å›¾ç‰‡ï¼ˆ`2560*1440`ï¼‰-> æ¯ä¸ªæ–‡ä»¶å¤§æ¦‚åœ¨`1.5M`å·¦å³

æµ‹è¯•æ•ˆæœï¼š

![æµ‹è¯•æ•ˆæœ](assets/img/2020-11-21-20-13-35.png)

ç»“è®ºï¼š

ä¸ºäº†æé«˜ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬å¤§å¤šæ•°çš„æ—¶å€™æ˜¯ä½¿ç”¨`domReady`ï¼Œè€Œä¸æ˜¯ä½¿ç”¨`onload`ï¼

## â˜…äº†è§£æ›´å¤š

â¹ï¼š[æµè§ˆå™¨æ¸²æŸ“åŸç†åŠæµç¨‹ - ææŸé¾™ - åšå®¢å›­](https://www.cnblogs.com/slly/p/6640761.html)

â¹ï¼š[ä¸ºä»€ä¹ˆè¯´ DOM æ“ä½œå¾ˆæ…¢_çŸ¥è¯†åº“_åšå®¢å›­](https://kb.cnblogs.com/page/534571/)

â¹ï¼š[Document.readyState - Web APIs - MDN](https://developer.mozilla.org/en-US/docs/Web/API/Document/readyState)

â¹ï¼š[é¡µé¢ç”Ÿå‘½å‘¨æœŸï¼šDOMContentLoadedï¼Œloadï¼Œbeforeunloadï¼Œunload](https://zh.javascript.info/onload-ondomcontentloaded)

â¹ï¼š[è¯‘-é¡µé¢ç”Ÿå‘½å‘¨æœŸï¼šDOMContentLoaded, load, beforeunload, unload è§£æ Â· Issue #3 Â· fi3ework/blog](https://github.com/fi3ework/blog/issues/3)

â¹ï¼š[DOM Ready è¯¦è§£ - ziqiu.zhang - åšå®¢å›­](https://www.cnblogs.com/zhangziqiu/archive/2011/06/27/domready.html)

â¹ï¼š[æµ…è°ˆDOMContentLoadedäº‹ä»¶åŠå…¶å°è£…æ–¹æ³•_Ms. Han å‰ç«¯å°ç«™ - SegmentFault æ€å¦](https://segmentfault.com/a/1190000005869515)

â¹ï¼š[ã€ç¬¬884æœŸã€‘ä½ ä¸çŸ¥é“çš„ DOMContentLoaded](https://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&mid=2651226247&idx=1&sn=8595a53fe98a3225d0cf0ce3f8ff2acc&chksm=bd4959038a3ed015c3d03fcdadcdabf4225a7eee4efb1988becd9ae3cd87f2216a34717383bc&mpshare=1&scene=1&srcid=0403gXzWL8aSq91TuBoqyFtm&key=19bca82a00e28dcd2ee4826d029205065cd6e6bbcc6f97f2da04129789e26a00b82cc9fccc4f838fc1bda9d9935ab03cc482bfcee734dd40c175fe0d882d0518c4ecf63d82e3d78471415eee960f66cc&ascene=0&uin=NzM0NTM5MzQx&devicetype=iMac+MacBookPro12%2C1+OSX+OSX+10.11.6+build(15G31)&version=12020110&nettype=WIFI&fontScale=100&pass_ticket=2uOqWTPNenLxF7wD%2F%2Bi%2F0TK60XMDQLdZ%2Bk2hyDjtKZsM9jitnQM4c%2B5cVfq0SJLP)